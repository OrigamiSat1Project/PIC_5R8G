/*** ç¹æ§­?¿½?¿½?ç¹§??¿½?¿½ç¹ï½³ç¸º??¿½?¿½IOç¹æ˜´???¿½?¿½ç¹éƒ??¿½?¿½??¿½?¿½è³? ***/

#include <xc.h>
#include "InitMPU.h"
#include "MAX2828.h"
#include "UART.h"
#include "time.h"
#include "FROM.h"
#include "Timer.h"

/*** ç¹æ§­?¿½?¿½?ç¹§??¿½?¿½ç¹ï½³è›»?¿½?¿½??¿½?¿½?è›¹?¿½?¿½????¿½?¿½?¿½?¿½?? ***/
void init_mpu(void)
{
	//ç¹æ˜´???¿½?¿½ç¹åŒ»???¿½?¿½è›»?¿½?¿½??¿½?¿½?è›¹?
	PORTA = 0x00;
	PORTB = 0x00;
	PORTC = 0x00;

	//ADéšª??¿½?¿½è³å¤²??¿½?¿½äº¥???¿½?¿½ç¸º??¿½?¿½?¿½?¿½??ç¹§??¿½?¿½ç¹§??¿½?¿½ç¹ï½«èœˆï½¥èœ‰å¹¢??¿½?¿½?
	ANSEL  = 0x00;	//ADéšª??¿½?¿½è³?
	ANSELH = 0x00;	//ADéšª??¿½?¿½è³?

	//ç¹æ˜´???¿½?¿½ç¹äº¥???¿½?¿½?¿½?¿½??¿½?¿½èœ‰ï¿½?¿½??¿½?¿½??¿½?¿½è³?
	TRISA  = 0xC0;	//èœˆï½¥?¿½?¿½??¿½?¿½èœ‰ï¿½?¿½??¿½?¿½??¿½?¿½è³?
	TRISB  = 0x2B;	//èœˆï½¥?¿½?¿½??¿½?¿½èœ‰ï¿½?¿½??¿½?¿½??¿½?¿½è³?
    	TRISC  = 0x84;	//èœˆï½¥?¿½?¿½??¿½?¿½èœ‰ï¿½?¿½??¿½?¿½??¿½?¿½è³?

	//ç¹æ˜´???¿½?¿½ç¹äº¥??¿½?¿½??¿½?¿½?è›Ÿï½¤éšª??¿½?¿½è³?
	PORTA  = 0x21;	//è›»?¿½?¿½??¿½?¿½?è›Ÿï½¤éšª??¿½?¿½è³?
	PORTB  = 0x94;	//è›»?¿½?¿½??¿½?¿½?è›Ÿï½¤éšª??¿½?¿½è³?
	PORTC  = 0x41;	//è›»?¿½?¿½??¿½?¿½?è›Ÿï½¤éšª??¿½?¿½è³?
}

void init_module(void){
    init_mpu();
    initbau(BAU_WITH_OBC);                   //14400bps
    MAX2828_EN = 1;                     //MAX2828 ON
    __delay_us(100);                    //100us wait
    FLASH_SPI_EI();                     //enable SPI
    init_max2828();                     //init MAX2828
    Mod_SW = 0;                         //FSK modulation ON
    initInterrupt();
}

    /* Comment
     * ======================================================================================
     * Make initialize mode
        Only copy the first regulation above and paste
     * ======================================================================================
     * Code
     * ======================================================================================
     *   init_mpu();
     *   //initbau(BAU_HIGH);                //115200bps
     *   //initbau(BAU_MIDDLE);              //57600bps
     *   initbau(BAU_LOW);                   //14400bps
     *   MAX2828_EN = 1;                     //MAX2828 ON
     *    __delay_us(100);                    //100us wait
     *    FLASH_SPI_EI();                     //enable SPI
     *   init_max2828();                     //init MAX2828
     *   Mod_SW = 0;                         //FSK modulation ON
     * ======================================================================================
     */
